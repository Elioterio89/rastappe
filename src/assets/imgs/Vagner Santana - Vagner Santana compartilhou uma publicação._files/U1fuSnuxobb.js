if (self.CavalryLogger) { CavalryLogger.start_js(["jT94c"]); }

__d("AbstractCommentLiveTypingPublisher",["destroyOnUnload"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=10*1e3,h=10*1e3,i=200;function a(){this.$1=null,this.$2=null,this.$3=-1,b("destroyOnUnload")(this.destroy.bind(this)),window.addEventListener&&window.addEventListener("unload",function(){this.destroy()}.bind(this))}a.prototype.destroy=function(){this.$4(),this.$5(),this.$6()};a.prototype.handleStartEvent=function(){this.$7()||this.$8(),this.$9()};a.prototype.handleStopEvent=function(){this.$4()};a.prototype.publishStartEvent=function(){throw new Error("publishStartEvent should be overridden by subclass")};a.prototype.publishStopEvent=function(){throw new Error("publishStopEvent should be overridden by subclass")};a.prototype.$7=function(){return!!this.$1};a.prototype.$5=function(){this.$2&&(clearTimeout(this.$2),this.$2=null)};a.prototype.$6=function(){this.$1&&(clearTimeout(this.$1),this.$1=null)};a.prototype.$9=function(){var a=Date.now(),b=this.$3;a>b+i&&(this.$3=a,this.$5(),this.$2=setTimeout(function(){this.$4()}.bind(this),h))};a.prototype.$4=function(){this.$7()&&(this.publishStopEvent(),this.$6()),this.$5()};a.prototype.$8=function(){this.publishStartEvent(),this.$6(),this.$1=setTimeout(function(){this.$8()}.bind(this),g)};e.exports=a}),null);