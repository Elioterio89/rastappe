if (self.CavalryLogger) { CavalryLogger.start_js(["GJSTr"]); }

__d("ActivityLogStory",["Event","Run","Toggler"],(function(a,b,c,d,e,f){"use strict";a={registerPopover:function(a){var c=b("Event").listen(window,"scroll",function(c){b("Toggler").hide(a)});b("Run").onLeave(c.remove.bind(c))}};e.exports=a}),null);
__d("AllActivityContentLoader",["csx","Arbiter","CSS","DOM","DOMScroll","MorePagerFetchOnScroll","OnVisible","Parent","TimelineComponentKeys","TimelineConstants","TimelineController","TimelineLegacySections","TimelineSmartInsert","UIPagelet","Vector","$","clickRefAction"],(function(a,b,c,d,e,f,g){__p&&__p();var h=!1,i=null,j={},k=[],l={},m=[],n=null;function o(a,c,d,e,f){this.node=a,this._canScrollLoad=!0,this.scrubberKey=c,this._pageletLoadData=d,this.loaded=e,this.sortKey=f,this.contentNode=b("DOM").scry(a,"div._z6j")[0]}function p(){if(h)return;b("TimelineController").register(b("TimelineComponentKeys").CONTENT,r);b("clickRefAction")("scrubber").set_namespace("allactivity");h=!0}function q(a){a=b("TimelineLegacySections").get(a);a&&a._canScrollLoad&&a.load()}Object.assign(o.prototype,{load:function(){__p&&__p();if(this.loaded)return;this.loaded=!0;this.contentNode&&b("CSS").hide(this.contentNode);b("CSS").show(b("Parent").byClass(this.node,"fbTimelineSection"));var a=this.node;function c(c){b("TimelineSmartInsert").run(a,c)}var d=b("DOM").find(this.node,"div.fbTimelineLogStream");m.push(b("UIPagelet").loadFromEndpoint("TimelineEntStoryActivityLogPagelet",d.id,this._pageletLoadData,{usePipe:!0,jsNonblock:!0,constHeight:!0,displayCallback:c,append:!0}))},contentAdded:function(a){this.hasContent||(b("CSS").removeClass(b("Parent").byClass(this.node,"stat_elem"),"async_saving"),this.contentNode&&(a&&b("DOM").prependContent(this.contentNode,a),b("CSS").show(this.contentNode)),this.hasContent=!0)},fullyLoaded:function(){this.hasContent||(b("CSS").removeClass(b("Parent").byClass(this.node,"stat_elem"),"async_saving"),b("CSS").show(b("DOM").find(this.node,"div._40pu")),this.contentNode&&b("CSS").hide(this.contentNode))},activateScrollLoad:function(){this._canScrollLoad=!0,l[this.scrubberKey]&&l[this.scrubberKey].reset()},deactivateScrollLoad:function(){if(!this.loaded)this._canScrollLoad=!1;else{var a=b("DOM").scry(this.node,".uiMorePager");a&&a.map(function(a){a=b("MorePagerFetchOnScroll").getInstance(a.id);a&&a.removeEventListeners()})}l[this.scrubberKey]&&l[this.scrubberKey].remove()},getParent:function(){return this.parentKey?b("TimelineLegacySections").get(this.parentKey):null}});var r={SCROLL_TO_OFFSET:115,HEADER_SCROLL_CUTOFF:30,CURRENT_SECTION_OFFSET:150,registerTimePeriod:function(a,c,d,e,f,g){p();a=new o(a,c,d,e,g);!f?(k.push(c),j[c]=!0):(a.parentKey=f,b("TimelineLegacySections").get(f).subSections=b("TimelineLegacySections").get(f).subSections||[],b("TimelineLegacySections").get(f).subSections.push(a),b("TimelineLegacySections").get(f).subSections.sort(function(a,b){return b.sortKey-a.sortKey}));b("TimelineLegacySections").set(c,a);r.checkCurrentSectionChange();b("Arbiter").inform(b("TimelineConstants").SECTION_REGISTERED,{scrubberKey:c},"persistent")},reset:function(){r.stopLoadingContent(),h=!1,b("TimelineLegacySections").removeAll(),i=null,j={},k=[],l={},m=[],n=null},stopLoadingContent:function(){for(var a in l)l[a]&&l[a].remove();for(var b=0;b<m.length;b++)m[b].cancel()},setContentHeader:function(a){n=a},checkCurrentSectionChange:function(){var a=r.getCurrentSection(),c=i&&i.scrubberKey;if(a&&a.scrubberKey!==c){i=a;c=a.scrubberKey;a=a.parentKey;a||(a=c,c=null);b("TimelineController").sectionHasChanged(a,c)}},getCurrentSection:function(){__p&&__p();var a={},c=b("TimelineLegacySections").getAll();for(var d in c){var e=c[d];if(!e.loaded)continue;var f=b("Vector").getElementPosition(e.node,"viewport").y;f<r.CURRENT_SECTION_OFFSET&&(a[f]=e)}f=Math.max.apply(this,Object.keys(a));e=f==-Infinity;if(!e)return a[f];else return null},enableScrollLoad:function(a,c,d){a=b("$")(a);c=r.getNextSectionKey(c);c&&(l[c]=new(b("OnVisible"))(a,q.bind(null,c),!1,d||1e3))},getNextSectionKey:function(a){__p&&__p();var c=b("TimelineLegacySections").get(a);c=c.getParent();if(c)for(var d=0;d<c.subSections.length-1;d++)if(c.subSections[d].scrubberKey==a)return c.subSections[d+1].scrubberKey;for(var d=0;d<k.length-d;d++)if(k[d]==c.scrubberKey){a=k[d+1];if(a){a=b("TimelineLegacySections").get(a);if(a&&a.subSections){a=a.subSections[0];if(a)return a.scrubberKey}}}return null},navigateToSection:function(a,c,d){__p&&__p();c=!!c;d=b("TimelineLegacySections").get(a);if(!d)return;d.getParent()||(a=d.subSections[0].scrubberKey,d=b("TimelineLegacySections").get(a));for(var e=0;e<k.length;e++){var f=b("TimelineLegacySections").get(k[e]);for(var g=0;g<f.subSections.length;g++){if(f.subSections[g].scrubberKey==a)break;f.subSections[g].deactivateScrollLoad()}if(f.scrubberKey==d.getParent().scrubberKey)break}d.activateScrollLoad();d.load();r.adjustContentPadding();g=b("Vector").getScrollPosition().x;f=b("Vector").getElementPosition(d.node).y;if(!c){e=r.SCROLL_TO_OFFSET;b("DOMScroll").scrollTo(new(b("Vector"))(g,f-e,"document"))}},adjustContentPadding:function(){b("$")("fbTimelineLogBody").style.paddingBottom=b("Vector").getViewportDimensions().y-r.CURRENT_SECTION_OFFSET-r.HEADER_SCROLL_CUTOFF+"px"},sectionHasContent:function(a){a=b("TimelineLegacySections").get(a);a&&a.contentAdded(n);n=null},sectionFullyLoaded:function(a){a=b("TimelineLegacySections").get(a);a&&a.fullyLoaded()}};e.exports=r}),null);
__d("ActivityLogSearch",["CSS","DOM","Event","Input","Run"],(function(a,b,c,d,e,f){function a(a,c,d){var e=b("DOM").find(d,".inputtext");c=b("Event").listen(c,"click",function(){b("CSS").hide(a),b("CSS").show(d),e.focus()});b("Run").onLeave(c.remove.bind(c));c=b("Event").listen(e,"blur",function(){b("Input").getValue(e)||(b("CSS").hide(d),b("CSS").show(a))});b("Run").onLeave(c.remove.bind(c))}e.exports=a}),null);
__d("PopoverMenuDynamicTooltip",["csx","DOMQuery","Tooltip"],(function(a,b,c,d,e,f,g){__p&&__p();function a(a){"use strict";this._popoverMenu=a,this._setMenuSubscription=null,this._changeSubscription=null}a.prototype.enable=function(){"use strict";this._setMenuSubscription=this._popoverMenu.subscribe("setMenu",this._onSetMenu.bind(this))};a.prototype.disable=function(){"use strict";this._popoverMenu.unsubscribe(this._setMenuSubscription),this._setMenuSubscription=null,this._removeChangeSubscription()};a.prototype._onSetMenu=function(){"use strict";__p&&__p();this._removeChangeSubscription(),this._menu=this._popoverMenu.getMenu(),this._changeSubscription=this._menu.subscribe("change",function(a,c){__p&&__p();a=c.item;c[0]&&(a=c[0].item);if(!a)return;c=a.getLabel();c=c?c.toString():null;if(!c)return;a=this._popoverMenu.getTriggerElem();a=b("DOMQuery").scry(a,"span._55pe")[0];if(a&&a.nodeName){a=a.parentNode;a&&b("Tooltip").set(a,c)}}.bind(this))};a.prototype._removeChangeSubscription=function(){"use strict";this._changeSubscription&&(this._menu.unsubscribe(this._changeSubscription),this._changeSubscription=null)};e.exports=a}),null);
__d("ScrollHighlight",["DOMScroll","highlight"],(function(a,b,c,d,e,f){a={actOn:function(a,c,d){b("DOMScroll").scrollTo(a,!0,!1,0,d),b("highlight")(a,null,c)}};e.exports=a}),null);
__d("ProfileApprovalController",["AsyncRequest","DOM","Event","HTML","$","ge"],(function(a,b,c,d,e,f){__p&&__p();function a(a){"use strict";this.queueType=a;a=b("ge")("profileApprovalSeeMoreLink");a&&b("Event").listen(a,"click",this.clickedSeeMore.bind(this))}a.prototype.getNewStories=function(){"use strict";var a=this.getStoryData();a={filter:this.FILTER_NEWER,filter_timestamp:a.newest_time,filter_fbid:a.newest_fbid};new(b("AsyncRequest"))().setURI("/ajax/profile/approval/get_more.php").setData(a).setHandler(this.handleContent).send()};a.prototype.clickedSeeMore=function(){"use strict";var a=this.getStoryData();a={queue_type:this.queueType,filter:this.FILTER_OLDER,filter_timestamp:a.oldest_time,filter_fbid:a.oldest_fbid};new(b("AsyncRequest"))().setURI("/ajax/profile/approval/get_more.php").setData(a).setHandler(this.handleContent).send()};a.prototype.handleContent=function(a){"use strict";__p&&__p();a=a.payload;if(a.pager_error){b("DOM").replace(b("$")("profileApprovalSeeMoreContainer"),b("HTML")(a.pager_markup));return}a.hide_more_pager&&b("DOM").remove(b("$")("profileApprovalSeeMoreContainer"));if(!a.items_markup)return;a.insert_before&&b("DOM").prependContent(b("DOM").find(b("$")("profileApprovalContentContainer"),".profileApprovalList"),b("HTML")(a.items_markup));a.insert_after&&b("DOM").appendContent(b("DOM").find(b("$")("profileApprovalContentContainer"),".profileApprovalList"),b("HTML")(a.items_markup))};a.prototype.getStoryData=function(){"use strict";var a=b("DOM").scry(b("$")("profileApprovalContentContainer"),".profileApprovalStoryContainer");if(!a)return;var c=a[0];a=a[a.length-1];return{newest_time:c.getAttribute("data-timestamp"),newest_fbid:c.getAttribute("data-fbid"),oldest_time:a.getAttribute("data-timestamp"),oldest_fbid:a.getAttribute("data-fbid")}};a.NO_MORE_CONTENT="no_more_content";Object.assign(a.prototype,{FILTER_NONE:0,FILTER_OLDER:1,FILTER_NEWER:2});e.exports=a}),null);
__d("legacy:profile-approval-controller",["ProfileApprovalController"],(function(a,b,c,d,e,f){a.ProfileApprovalController=b("ProfileApprovalController")}),3);
__d("TimelineAllActivitySideNav",["csx","CSS","DOM","DOMQuery","FutureSideNav","PageTransitions","Scroll","Style","UIPagelet","$","ge","getOrCreateDOMID","getViewportDimensions"],(function(a,b,c,d,e,f,g){__p&&__p();function h(){var a=b("ge")("rightColContent");a=a&&b("DOMQuery").scry(a,".fbTimelineLogScrubber")[0];a&&b("DOM").remove(a)}a={init:function(a,c,d,e,f){__p&&__p();f=b("DOMQuery").find(b("$")("contentArea"),"._6-0");var g=b("getOrCreateDOMID")(f);b("Style").set(f,"minHeight",b("getViewportDimensions")().height+"px");b("CSS").addClass(a,"fixed_elem");b("PageTransitions").registerHandler(function(a){__p&&__p();if(c===a.getPath()&&a.getQueryData().sk==d){a=babelHelpers["extends"]({profile_id:e,renderContentsOnly:1,uripath:a.toString()},a.getQueryData());var f=b("FutureSideNav").getInstance(),i=f&&f._getItemForKey(a.log_filter||"all");i&&f.setLoading(i);h();b("UIPagelet").loadFromEndpoint("TimelineAllActivityColumn",g,a,{jsNonblock:!0,constHeight:!0,displayCallback:function(a){a(),i&&f.setSelected(i),b("Scroll").setTop(document.body,0),b("PageTransitions").transitionComplete(!0)}});return!0}return!1})}};e.exports=a}),null);
__d("ApprovalQueueCountUpdater",["Arbiter","DOM","NavigationMessage","ge"],(function(a,b,c,d,e,f){a={updateCounts:function(a,c,d){var e=a.friends+a.others,f=b("ge")("tag_count_friends"),g=b("ge")("tag_count_other");b("Arbiter").inform(b("NavigationMessage").NAVIGATION_COUNT_UPDATE,{key:"review",count:e<=d?e:d,hide:!0});f&&b("DOM").setContent(f,a.friends<=c?a.friends:c+"+");g&&b("DOM").setContent(g,a.others<=c?a.others:c+"+")}};e.exports=a}),null);